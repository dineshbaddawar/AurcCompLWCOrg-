<aura:component implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes,force:lightningQuickAction" access="global" controller="ToDoController">
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/> 
    <aura:attribute name="recordId" type="String" />
    
    <aura:attribute name="todoColumns" type="List"/>
    <aura:attribute name="todoData" type="Object"/>
    <aura:attribute name="today" type="Date" description="To set todays date as mimimum value for Due date and reminder date"/>
    <aura:attribute name="objToDo" type="To_Do__c" default="{'sobjectType': 'To_Do__c'}"/>
    
    
    <lightning:card title= "Add New Task">
        <aura:set attribute="actions">
            <lightning:buttonicon iconName="utility:down"
                                  size="x-small"
                                  alternativeText="down icon" 
                                  onclick="{!c.toggleForm}"/>
        </aura:set>
        <div aura:id="formDiv" class="slds-size_1-of-1 slds-p-around_medium">
            <lightning:textarea aura:id="todoForm"
                                type="String"
                                label="Task Description"
                                value="{!v.objToDo.Description__c}"
                                required="true"
                                messageWhenValueMissing="Enter description"/>
            
            <lightning:input aura:id="duedate"
                             type="Date"
                             label="Due Date"
                             value="{!v.objToDo.Due_Date__c}"
                             required="true"
                             messageWhenValueMissing="Enter due date"
                             min="{!v.today}"
                             onchange="{!c.setMaxValueOfReminderDate}"/>
            
            <lightning:input aura:id="reminderDate"
                             type="Date"
                             disabled="true"
                             label="Reminder Date"
                             value="{!v.objToDo.Reminder_Date__c}"
                             min="{!v.today}"/>
            
            <lightning:button class="slds-m-top_small" 
                              label="Create Task"
                              variant="brand"
                              onclick="{!c.saveTodo}"/>
        </div>
    </lightning:card>
    
    <div class="slds-m-vertical_large">
        <p>Hello</p>
        <lightning:datatable aura:id="tableId" title="Created Task"
                             keyFideld="Id"
                             columns="{!v.todoColoumns}"
                             data="{!v.todoData}"
                             hideCheckboxColumn="true"/>
        
    </div>	
</aura:component>